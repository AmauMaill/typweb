var v=Object.defineProperty;var p=(s,e,t)=>e in s?v(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var g=(s,e,t)=>p(s,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();const y="modulepreload",E=function(s,e){return new URL(s,e).href},f={},P=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){const i=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),m=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(t.map(c=>{if(c=E(c,n),c in f)return;f[c]=!0;const u=c.endsWith(".css"),L=u?'[rel="stylesheet"]':"";if(!!n)for(let d=i.length-1;d>=0;d--){const h=i[d];if(h.href===c&&(!u||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${L}`))return;const l=document.createElement("link");if(l.rel=u?"stylesheet":y,u||(l.as="script"),l.crossOrigin="",l.href=c,m&&l.setAttribute("nonce",m),document.head.appendChild(l),u)return new Promise((d,h)=>{l.addEventListener("load",d),l.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return r.then(i=>{for(const o of i||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})},w={"nav.home":{en:"Home",fr:"Accueil"},"nav.about":{en:"About",fr:"Ã€ propos"},"nav.projects":{en:"Projects",fr:"Projets"},"nav.contact":{en:"Contact",fr:"Contact"}};class b{constructor(){g(this,"currentLang");g(this,"LANG_KEY","preferred_language");const e=localStorage.getItem(this.LANG_KEY);this.currentLang=e||this.getBrowserLanguage(),this.updateHtmlLang()}getBrowserLanguage(){return navigator.language.split("-")[0]==="fr"?"fr":"en"}getCurrentLanguage(){return this.currentLang}toggleLanguage(){this.currentLang=this.currentLang==="en"?"fr":"en",localStorage.setItem(this.LANG_KEY,this.currentLang),this.updateHtmlLang(),this.updatePageText()}updateHtmlLang(){document.documentElement.lang=this.currentLang}translate(e){const t=w[e];return t?t[this.currentLang]:(console.warn(`Translation missing for key: ${e}`),e)}async loadPageContent(e){try{console.log(`Loading page ${e} in ${this.currentLang}`);const t=await fetch(`/src/pages/${this.currentLang}/${e}.html`);if(!t.ok){console.warn(`No ${this.currentLang} version found for ${e}, falling back to English`);const n=await fetch(`/src/pages/en/${e}.html`);if(!n.ok)throw new Error(`Page ${e} not found in any language`);return await n.text()}return await t.text()}catch(t){throw console.error("Error loading page:",t),t}}updatePageText(){document.querySelectorAll(".nav-link").forEach(n=>{const r=n.getAttribute("data-translate-key");r&&(n.textContent=this.translate(r))});const t=document.getElementById("langToggle");t&&(t.textContent=this.currentLang.toUpperCase())}}class k{constructor(){g(this,"currentPage","home");g(this,"contentDiv");g(this,"navLinks");g(this,"languageService");g(this,"langToggle");this.contentDiv=document.getElementById("content"),this.navLinks=document.querySelectorAll(".nav-link"),this.langToggle=document.getElementById("langToggle"),this.languageService=new b,this.initializeEventListeners(),this.loadInitialPage()}initializeEventListeners(){this.navLinks.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const n=e.dataset.page||"home";this.navigateToPage(n)})}),this.langToggle&&this.langToggle.addEventListener("click",()=>{this.languageService.toggleLanguage(),this.loadPage(this.currentPage)}),window.addEventListener("popstate",e=>{var n;const t=((n=e.state)==null?void 0:n.page)||"home";this.loadPage(t)})}async loadInitialPage(){const e=window.location.pathname,t=e==="/"?"home":e.slice(1);await this.loadPage(t)}async navigateToPage(e){const t="/typweb",n=e==="home"?`${t}/`:`${t}/${e}`;history.pushState({page:e},"",n),await this.loadPage(e)}async loadPage(e){try{const t=await this.languageService.loadPageContent(e);if(this.contentDiv&&(this.contentDiv.innerHTML=t),this.currentPage=e,this.updateActiveNavLink(),this.initializePageFeatures(),e==="projects"){const{ProjectsLoader:n}=await P(async()=>{const{ProjectsLoader:a}=await import("./projects-loader-DtBOJeby.js");return{ProjectsLoader:a}},[],import.meta.url);await new n().initialize()}}catch(t){console.error("Error loading page:",t),this.contentDiv.innerHTML="<h1>Page Not Found</h1>"}}updateActiveNavLink(){this.navLinks.forEach(e=>{const t=e.dataset.page===this.currentPage;e.classList.toggle("active",t)})}initializePageFeatures(){const e=document.getElementById("themeToggle");e&&e.addEventListener("click",()=>this.toggleTheme());const t=document.getElementById("contactForm");t&&t.addEventListener("submit",n=>this.handleFormSubmit(n))}toggleTheme(){document.body.classList.toggle("dark-theme");const e=document.body.classList.contains("dark-theme");localStorage.setItem("theme",e?"dark":"light")}async handleFormSubmit(e){e.preventDefault();const t={name:document.getElementById("name").value,email:document.getElementById("email").value,message:document.getElementById("message").value};try{console.log("Form submitted:",t),e.target.reset(),alert("Message sent successfully!")}catch(n){console.error("Error submitting form:",n),alert("Failed to send message. Please try again.")}}}window.addEventListener("DOMContentLoaded",()=>{new k});export{P as _};
//# sourceMappingURL=index-gLXovnyt.js.map
